<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="jakarta.faces.html"
      xmlns:ui="jakarta.faces.facelets">

<h:head>
    <title>CO₂ Emissions Reporting System</title>
    <h:outputStylesheet library="css" name="style.css"/>
</h:head>

<h:body>

    <header>
        <h:graphicImage
                value="https://www.iu.de/logos/iu-logo.svg"
                width="150px"/>

        <h1>CO₂ Emissions Reporting System</h1>

        <nav>
            <h:link value="Start" outcome="/index.xhtml"/>

            <h:panelGroup rendered="#{userLoginBean.loggedIn}">
                |
                <h:link value="Alle Reports" outcome="/reports.xhtml"/>
                |
                <h:link value="Meine Reports" outcome="/my-reports.xhtml"/>

                <!-- Nur Reviewer oder Admin sehen Review -->
                <h:panelGroup rendered="#{userLoginBean.loggedInUser.reviewer or userLoginBean.loggedInUser.admin}">
                    |
                    <h:link value="Review" outcome="/review.xhtml"/>
                </h:panelGroup>

            </h:panelGroup>
        </nav>

        <br/>

        <h:panelGroup rendered="#{userLoginBean.loggedIn}">
            Willkommen #{userLoginBean.loggedInUser.username}
            |
            Rolle: #{userLoginBean.loggedInUser.role}
            |
            <h:form style="display:inline">
                <h:commandLink value="Logout"
                               action="#{userLoginBean.logout}"/>
            </h:form>
        </h:panelGroup>
    </header>

    <main>
        <ui:insert name="content"/>
    </main>

    <footer>
        <p>
            DSBPIIJEE01 - Java EE Projekt -
            CO₂ Emissions Reporting und Peer Review System - WS 2025/26
        </p>
    </footer>

</h:body>
</html>

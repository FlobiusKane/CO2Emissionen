<ui:composition template="/templates/layout.xhtml"
                xmlns="http://www.w3.org/1999/xhtml"
                xmlns:h="jakarta.faces.html"
                xmlns:ui="jakarta.faces.facelets"
                xmlns:f="jakarta.faces.core">

    <ui:define name="content">

        <f:metadata>
            <f:viewParam name="reportId"
                         value="#{reportDetailsBean.reportId}" />
            <f:viewAction action="#{reportDetailsBean.loadReport}" />
        </f:metadata>

        <h2>Report Details</h2>

        <h:panelGroup rendered="#{reportDetailsBean.canEditReport()}">
            <h:link value="Report bearbeiten" outcome="/edit-report.xhtml">
                <f:param name="reportId" value="#{reportDetailsBean.selectedReport.id}" />
            </h:link>
        </h:panelGroup>


        <h:panelGrid columns="2">

            <h:outputText value="Land:"/>
            <h:outputText value="#{reportDetailsBean.selectedReport.country}" />

            <h:outputText value="Jahr:"/>
            <h:outputText value="#{reportDetailsBean.selectedReport.year}" />

            <h:outputText value="Emission:"/>
            <h:outputText value="#{reportDetailsBean.selectedReport.emissionValue}" />

            <h:outputText value="Status:"/>
            <h:outputText value="#{reportDetailsBean.selectedReport.status}" />

            <h:outputText value="Autor:"/>
            <h:outputText value="#{reportDetailsBean.authorName}" />

        </h:panelGrid>


        <h3>Review-Information</h3>

        <h:panelGroup rendered="#{not empty reportDetailsBean.latestReview}">
            <h:panelGrid columns="2">

                <h:outputText value="Reviewer:"/>
                <h:outputText value="#{reportDetailsBean.latestReviewerName}"/>

                <h:outputText value="Review-Status:"/>
                <h:outputText value="#{reportDetailsBean.latestReview.status}"/>

                <h:outputText value="Kommentar:"/>
                <h:outputText value="#{reportDetailsBean.latestReview.comment}"/>

                <h:outputText value="Datum:"/>
                <h:outputText value="#{reportDetailsBean.latestReview.reviewDate}"/>

            </h:panelGrid>
        </h:panelGroup>

        <h:panelGroup rendered="#{empty reportDetailsBean.latestReview}">
            <p>Noch kein Review vorhanden (Status ist aktuell: #{reportDetailsBean.selectedReport.status}).</p>
        </h:panelGroup>


    </ui:define>
</ui:composition>
